<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="estilo.css">
    <title>Encriptador</title>
</head>
<body>
    <header>
        <h2>Encriptador de Texto</h2>
    </header>
        
    <div id="particulas">
        <canvas id="matrix">Reinicia la página</canvas>
        
    </div> 
	<script src="matrix.js"></script>
    <div id="cuerpo">
        <section>
            <main>
                    <img src="img/logo.svg" alt="">
                <div id="centro">
                    <textarea name="input-texto" id="input-texto" cols="30" rows="10" placeholder="► Ingrese un texto sin asentos y en minusculas para ser Codificado ◄"></textarea>
                </div>
                <div id="centro">
                    <button id="boton1">encriptar</button>
                    <button id="boton2">desencriptar</button>
                    <button id="borrar">refresh</button>
                </div>
            </main>
            <aside>
                <div class="encriptar off" id="encrip">
                    <h3>texto encriptado<h3>
                    <textarea class="imagen" name="encriptado" id="encriptado" cols="30" rows="10"></textarea> 
                </div>
                <div class="encriptar" id="encript">
                    <img src="img/muneco.svg" alt="">
                    <p class="grande">Ningun mensaje fue<br>encontrado</p>
                    <p>Ingrese el texto que desee encriptar o <br>desencriptar</p>
                </div>
                <div id="centro">
                    <button id="boton3">copiar</button>
                </div>
            </aside>

        </section>
        <footer>
            <a href="https://github.com/Lobo-Alejandro">
                <img src="img/github.png" alt="logo github"></a>
            <a href="https://www.linkedin.com/in/alejandro-lobo-83598a263/">
                <img src="img/linkedin.png" alt="logo linkedin"></a>
		<p>&copy; Lobo Rodrigo Alejandro | Oracle+AluraLatam 2023</p>
        </footer>
</div>
    
</body>

</html>
<script>
    var inp = document.getElementById("input-texto");
    inp.focus();
    var textarea= document.getElementById("encriptado");
    var texto = inp;   //para pasar toda la cadena a la variable texto y poder trabajar
    var guardar = [];
    var encrip = document.getElementById("encrip");
    var encript = document.getElementById("encript");
	
	function valida(){
        var puede;
        for (let i = 0; i < texto.value.length; i++) {
            var camb = texto.value[i];
            var asciiCod = camb.charCodeAt(0);
            var a=2;
            var frase=[];
            
            if ((96<asciiCod && asciiCod<123)) {
                    a=0;
                        
            }else if (asciiCod == 32){
                a=0;
            }else{
                a=1;


            }
            if (a != 0) {
                alert("El texto no puede llevar MAYUSCULAS ni CARACTERES ESPECIALES");
                borrarTexto();            }
            puede=a;
        }
        if (puede==0) {
            encriptar();
        }
    }

     function validar(){
        var puede;
        for (let i = 0; i < texto.value.length; i++) {
            var x = texto.value[i];
            var asciiCod = x.charCodeAt(0);
            var a=2;
            var frase=[];
            
            if ((96<asciiCod && asciiCod<123)) {
                    a=0;
                        
            }else if (asciiCod == 32){
                a=0;
                     

            }else{
                a=1;


            }
            if (a != 0) {
                alert("El texto no puede llevar MAYUSCULAS ni CARACTERES ESPECIALES");
                borrarTexto();            }
            puede=a;
        }
        if (puede==0) {
            desEncriptar();
        }
    }


    function encriptar(){
        var frase=[];
        for (let i = 0; i < texto.value.length; i++) {
            switch (texto.value[i]) {
                case 'a':
                    frase[i]="ai";
                    guardar[i]=frase[i];
                break;
                case 'e':
                    frase[i]="enter";
                    guardar[i]=frase[i];
                break;
                case 'i':
                    frase[i]="imes";
                    guardar[i]=frase[i];
                break;
                case 'o':
                    frase[i]="ober";
                    guardar[i]=frase[i];
                break;
                case 'u':
                    frase[i]="ufat";
                    guardar[i]=frase[i];
                break;
                default:
                    frase[i]=texto.value[i];
                    guardar[i]=frase[i];
                    break;
            }
        encrip.classList.remove('off');
        encript.classList.add('off');
        textarea.value=frase.join('');
    }

    
    function desEncriptar(){
        var inp = document.getElementById("input-texto");
        var texto = inp;
        var desencriptado=[];
        for (let i = 0; i < texto.value.length; i++) {
                if ((texto.value[i]=='a') && (texto.value[i+1]=='i')) {
                    desencriptado[i]="a";
                    guardar[i]=desencriptado[i];
                    i +=1;
                }else if (texto.value[i]=='e' && texto.value[i+1]=='n' && texto.value[i+2]=='t' && texto.value[i+3]=='e' && texto.value[i+4]=='r')  {
                    desencriptado[i]="e";
                    guardar[i]=desencriptado[i];
                    i += 4;
                }else if (texto.value[i]=='i' && texto.value[i+1]=='m' && texto.value[i+2]=='e' && texto.value[i+3]=='s') {
                    desencriptado[i]="i";
                    guardar[i]=desencriptado[i];
                      i += 3;
                }else if (texto.value[i]=='o' && texto.value[i+1]=='b' && texto.value[i+2]=='e' && texto.value[i+3]=='r') {
                    desencriptado[i]="o";
                    guardar[i]=desencriptado[i];
                      i += 3;
                }else if (texto.value[i]=='u' && texto.value[i+1]=='f' && texto.value[i+2]=='a' && texto.value[i+3]=='t') {
                    desencriptado[i]="u";
                    guardar[i]=desencriptado[i];
                      i += 3;
                }else{
                    desencriptado[i]=texto.value[i];
                    guardar[i]=desencriptado[i];
                }
            }
            encrip.classList.remove('off');
            encript.classList.add('off');
            textarea.value=desencriptado.join('');
    }

    function copiarTexto(){
        //Obtenemos el campo de texto.
        var copiar = document.getElementById("encriptado");
        //Selecionamos el campo de texto.
        copiar.select();
        copiar.setSelectionRange(0, 99999); //Rango para moviles.
        //Copia aquello que se encuentra dentro del campo de texto.
        navigator.clipboard.writeText(copiar.value);
        
        //Alerta de validación de la copia del texto.
        alert("Se copio el texto:  " + copiar.value);
        console.log(alert);
    }

    function borrarTexto(){
        inp.value='';
        inp.focus();
        textarea.value='';
        encrip.classList.add('off');
        encript.classList.remove('off');
    }

    var button1 = document.getElementById("boton1");
    button1.onclick=valida;

    var button2 = document.getElementById("boton2");
    button2.onclick=validar;

    var borrar = document.getElementById("borrar");
    borrar.onclick=borrarTexto;

    var button3 = document.getElementById("boton3");
    button3.onclick=copiarTexto;
</script>
